(function(){$(function(){var a,t,n,e,i,r;return $("body").on("focus","#date_paid,#finished_at",function(){return $(this).datepicker({dateFormat:"yy-mm-dd",showAnim:"show"})}),n=function(a,t){return setTimeout(t,a)},e=function(a){return $(".flash-notice").text(a).addClass("animated bounceInRight").show(),$("html, body").animate({scrollTop:0},500),n(2e3,function(){return window.location.reload()})},t=function(a){var t;return t=$.trim($("#serial_number").val()),$.get("/admin/cards/check_serial",{num:t},function(t){return t.success&&t.value?($("#serial_number").parent(".padded").addClass("invalid").removeClass("valid"),$("html, body").animate({scrollTop:300},500)):r(a)})},a=function(a){var n,e,i,r;return i=$.trim($("#serial_number").val()),e=$.trim($("#quantity_purchased").val()),n=$.trim($("#amount_payable").val()),r=!0,$("#serial_number,#quantity_purchased,#amount_payable").each(function(){var a;a=$.trim($(this).val()),a.length<=0&&($(this).parents(".padded").addClass("invalid").removeClass("valid"),$("html, body").animate({scrollTop:300},500),r=!1)}),r?t(a):void 0},i=function(){return $(".flash-notice").removeClass("animated bounceInRight").addClass("animated bounceOutRight")},r=function(a){var t,n,i;return n=$("form.new-card").serialize(),a.hasClass("upd")?(t="/admin/cards/update_info",i="\u5b66\u4e60\u5361\u5355\u4f4d\u4fe1\u606f\u4fee\u6539\u6210\u529f\uff01"):(t="/admin/cards",i="\u65b0\u5b66\u4e60\u5361\u521b\u5efa\u6210\u529f,\u70b9\u51fb\u5217\u8868\u8fdb\u884c\u67e5\u770b!"),$.post(t,n,function(a){return a.success?e(i):void 0})},$("body").on("click",".tab-nav:last",function(){return $.get("/admin/cards/new",{},function(){})}),$("body").on("click",".search_card ",function(a){var t;return a.preventDefault(),t=$("form.search-card").serialize(),$.get("/admin/cards",t,function(){})}),$("body").on("click","td a.delete-card",function(){var a,t;return t=$(this).parents("tr"),a=$(this).data("cid"),$.get("/admin/cards/delete",{id:a},function(a){return a.success?t.remove():void 0})}),$("body").on("click",".pagination a",function(){var a,t,n,e,i,r,d,s,o,c;return!$(this).hasClass("disabled")&&(r=$(this).data("page"),s=$(this).data("serial"),t=$(this).data("company"),d=$(this).data("receipt"),a=$(this).data("buyer"),i=$(this).data("mobile"),o=$(this).data("status"),c=$(this).data("type"),n=$(this).data("exec"),e={page:r,serial:s,company:t,receipt:d,buyer:a,mobile:i,status:o,type:c,exec:n},r)?$.get("/admin/cards",e,function(){}):void 0}),$("body").on("focus","form.new-card input",function(){return $(this).parents(".padded").removeClass("invalid").removeClass("valid")}),$("body").on("click","form.new-card .info-submit",function(t){var n;return n=$(this),t.preventDefault(),a(n)}),$("body").on("keydown","form.new-card #post_address",function(a){return 13===a.which?$("form.new-card .info-submit").click():void 0}),$("body").on("click","a.edit-card",function(){var a;return a=$(this).attr("id"),$.get("/admin/cards/"+a+"/edit",{},function(){})})})}).call(this);