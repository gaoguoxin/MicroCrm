!function(e){"object"==typeof exports&&exports&&"object"==typeof module&&module&&module.exports===exports?e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function t(e){var t=e[0];return t.offsetWidth>0&&t.offsetHeight>0}function i(t){if(t.minTime&&(t.minTime=$(t.minTime)),t.maxTime&&(t.maxTime=$(t.maxTime)),t.durationTime&&"function"!=typeof t.durationTime&&(t.durationTime=$(t.durationTime)),"now"==t.scrollDefault?t.scrollDefault=$(new Date):t.scrollDefault?t.scrollDefault=$(t.scrollDefault):t.minTime&&(t.scrollDefault=t.minTime),t.scrollDefault&&(t.scrollDefault=n(t.scrollDefault,t)),"string"===e.type(t.timeFormat)&&t.timeFormat.match(/[gh]/)&&(t._twelveHourTime=!0),t.disableTimeRanges.length>0){for(var i in t.disableTimeRanges)t.disableTimeRanges[i]=[$(t.disableTimeRanges[i][0]),$(t.disableTimeRanges[i][1])];t.disableTimeRanges=t.disableTimeRanges.sort(function(e,t){return e[0]-t[0]});for(var i=t.disableTimeRanges.length-1;i>0;i--)t.disableTimeRanges[i][0]<=t.disableTimeRanges[i-1][1]&&(t.disableTimeRanges[i-1]=[Math.min(t.disableTimeRanges[i][0],t.disableTimeRanges[i-1][0]),Math.max(t.disableTimeRanges[i][1],t.disableTimeRanges[i-1][1])],t.disableTimeRanges.splice(i,1))}return t}function r(t){var i=t.data("timepicker-settings"),r=t.data("timepicker-list");if(r&&r.length&&(r.remove(),t.data("timepicker-list",!1)),i.useSelect){r=e("<select />",{"class":"ui-timepicker-select"});var n=r}else{r=e("<ul />",{"class":"ui-timepicker-list"});var n=e("<div />",{"class":"ui-timepicker-wrapper",tabindex:-1});n.css({display:"none",position:"absolute"}).append(r)}if(i.noneOption)if(i.noneOption===!0&&(i.noneOption=i.useSelect?"Time...":"None"),e.isArray(i.noneOption)){for(var o in i.noneOption)if(parseInt(o,10)==o){var c=a(i.noneOption[o],i.useSelect);r.append(c)}}else{var c=a(i.noneOption,i.useSelect);r.append(c)}i.className&&n.addClass(i.className),null===i.minTime&&null===i.durationTime||!i.showDuration||(n.addClass("ui-timepicker-with-duration"),n.addClass("ui-timepicker-step-"+i.step));var u=i.minTime;"function"==typeof i.durationTime?u=$(i.durationTime()):null!==i.durationTime&&(u=i.durationTime);var m=null!==i.minTime?i.minTime:0,p=null!==i.maxTime?i.maxTime:m+y-1;m>=p&&(p+=y),p===y-1&&"string"===e.type(i.timeFormat)&&-1!==i.timeFormat.indexOf("H")&&(p=y);for(var h=i.disableTimeRanges,g=0,T=h.length,o=m;p>=o;o+=60*i.step){var x=o,w=b(x,i.timeFormat);if(i.useSelect){var C=e("<option />",{value:w});C.text(w)}else{var C=e("<li />");C.data("time",86400>=x?x:x%86400),C.text(w)}if((null!==i.minTime||null!==i.durationTime)&&i.showDuration){var H=k(o-u,i.step);if(i.useSelect)C.text(C.text()+" ("+H+")");else{var D=e("<span />",{"class":"ui-timepicker-duration"});D.text(" ("+H+")"),C.append(D)}}T>g&&(x>=h[g][1]&&(g+=1),h[g]&&x>=h[g][0]&&x<h[g][1]&&(i.useSelect?C.prop("disabled",!0):C.addClass("ui-timepicker-disabled"))),r.append(C)}if(n.data("timepicker-input",t),t.data("timepicker-list",n),i.useSelect)t.val()&&r.val(s(t.val(),i)),r.on("focus",function(){e(this).data("timepicker-input").trigger("showTimepicker")}),r.on("blur",function(){e(this).data("timepicker-input").trigger("hideTimepicker")}),r.on("change",function(){f(t,e(this).val(),"select")}),f(t,r.val()),t.hide().after(r);else{var R=i.appendTo;"string"==typeof R?R=e(R):"function"==typeof R&&(R=R(t)),R.append(n),d(t,r),r.on("mousedown","li",function(){t.off("focus.timepicker"),t.on("focus.timepicker-ie-hack",function(){t.off("focus.timepicker-ie-hack"),t.on("focus.timepicker",_.show)}),l(t)||t[0].focus(),r.find("li").removeClass("ui-timepicker-selected"),e(this).addClass("ui-timepicker-selected"),v(t)&&(t.trigger("hideTimepicker"),n.hide())})}}function a(t,i){var r,a,n;return"object"==typeof t?(r=t.label,a=t.className,n=t.value):"string"==typeof t?r=t:e.error("Invalid noneOption value"),i?e("<option />",{value:n,"class":a,text:r}):e("<li />",{"class":a,text:r}).data("time",n)}function n(t,i){if(e.isNumeric(t)||(t=$(t)),null===t)return null;var r=t%(60*i.step);return r>=30*i.step?t+=60*i.step-r:t-=r,t}function s(e,t){return e=n(e,t),null!==e?b(e,t.timeFormat):void 0}function o(){return new Date(1970,1,1,0,0,0)}function c(t){var i=e(t.target),r=i.closest(".ui-timepicker-input");0===r.length&&0===i.closest(".ui-timepicker-wrapper").length&&(_.hide(),e(document).unbind(".ui-timepicker"))}function l(e){var t=e.data("timepicker-settings");return(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&t.disableTouchKeyboard}function u(t,i,r){if(!r&&0!==r)return!1;var a=t.data("timepicker-settings"),n=!1,s=30*a.step;return i.find("li").each(function(t,i){var a=e(i);if("number"==typeof a.data("time")){var o=a.data("time")-r;return Math.abs(o)<s||o==s?(n=a,!1):void 0}}),n}function d(e,t){t.find("li").removeClass("ui-timepicker-selected");var i=$(p(e),e.data("timepicker-settings"));if(null!==i){var r=u(e,t,i);if(r){var a=r.offset().top-t.offset().top;(a+r.outerHeight()>t.outerHeight()||0>a)&&t.scrollTop(t.scrollTop()+r.position().top-r.outerHeight()),r.addClass("ui-timepicker-selected")}}}function m(t,i){if(""!==this.value&&"timepicker"!=i){var r=e(this);if(r.data("timepicker-list"),!r.is(":focus")||t&&"change"==t.type){var a=$(this.value);if(null===a)return void r.trigger("timeFormatError");var n=r.data("timepicker-settings"),s=!1;if(null!==n.minTime&&a<n.minTime?s=!0:null!==n.maxTime&&a>n.maxTime&&(s=!0),e.each(n.disableTimeRanges,function(){return a>=this[0]&&a<this[1]?(s=!0,!1):void 0}),n.forceRoundTime){var o=a%(60*n.step);o>=30*n.step?a+=60*n.step-o:a-=o}var c=b(a,n.timeFormat);s?f(r,c,"error")&&r.trigger("timeRangeError"):f(r,c)}}}function p(e){return e.is("input")?e.val():e.data("ui-timepicker-value")}function f(e,t,i){if(e.is("input")){e.val(t);var r=e.data("timepicker-settings");r.useSelect&&"select"!=i&&e.data("timepicker-list").val(s(t,r))}return e.data("ui-timepicker-value")!=t?(e.data("ui-timepicker-value",t),"select"==i?e.trigger("selectTime").trigger("changeTime").trigger("change","timepicker"):"error"!=i&&e.trigger("changeTime"),!0):(e.trigger("selectTime"),!1)}function h(i){var r=e(this),a=r.data("timepicker-list");if(!a||!t(a)){if(40!=i.keyCode)return!0;_.show.call(r.get(0)),a=r.data("timepicker-list"),l(r)||r.focus()}switch(i.keyCode){case 13:return v(r)&&_.hide.apply(this),i.preventDefault(),!1;case 38:var n=a.find(".ui-timepicker-selected");return n.length?n.is(":first-child")||(n.removeClass("ui-timepicker-selected"),n.prev().addClass("ui-timepicker-selected"),n.prev().position().top<n.outerHeight()&&a.scrollTop(a.scrollTop()-n.outerHeight())):(a.find("li").each(function(t,i){return e(i).position().top>0?(n=e(i),!1):void 0}),n.addClass("ui-timepicker-selected")),!1;case 40:return n=a.find(".ui-timepicker-selected"),0===n.length?(a.find("li").each(function(t,i){return e(i).position().top>0?(n=e(i),!1):void 0}),n.addClass("ui-timepicker-selected")):n.is(":last-child")||(n.removeClass("ui-timepicker-selected"),n.next().addClass("ui-timepicker-selected"),n.next().position().top+2*n.outerHeight()>a.outerHeight()&&a.scrollTop(a.scrollTop()+n.outerHeight())),!1;case 27:a.find("li").removeClass("ui-timepicker-selected"),_.hide();break;case 9:_.hide();break;default:return!0}}function g(i){var r=e(this),a=r.data("timepicker-list");if(!a||!t(a))return!0;if(!r.data("timepicker-settings").typeaheadHighlight)return a.find("li").removeClass("ui-timepicker-selected"),!0;switch(i.keyCode){case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 77:case 80:case 186:case 8:case 46:d(r,a);break;default:return}}function v(e){var t=e.data("timepicker-settings"),i=e.data("timepicker-list"),r=null,a=i.find(".ui-timepicker-selected");if(a.hasClass("ui-timepicker-disabled"))return!1;if(a.length&&(r=a.data("time")),null!==r)if("string"==typeof r)e.val(r);else{var n=b(r,t.timeFormat);f(e,n,"select")}return!0}function k(e,t){e=Math.abs(e);var i,r,a=Math.round(e/60),n=[];return 60>a?n=[a,x.mins]:(i=Math.floor(a/60),r=a%60,30==t&&30==r&&(i+=x.decimal+5),n.push(i),n.push(1==i?x.hr:x.hrs),30!=t&&r&&(n.push(r),n.push(x.mins))),n.join(" ")}function b(t,i){if(null!==t){var r=new Date(T.valueOf()+1e3*t);if(!isNaN(r.getTime())){if("function"===e.type(i))return i(r);for(var a,n,s="",o=0;o<i.length;o++)switch(n=i.charAt(o)){case"a":s+=r.getHours()>11?x.pm:x.am;break;case"A":s+=r.getHours()>11?x.pm.toUpperCase():x.am.toUpperCase();break;case"g":a=r.getHours()%12,s+=0===a?"12":a;break;case"G":s+=r.getHours();break;case"h":a=r.getHours()%12,0!==a&&10>a&&(a="0"+a),s+=0===a?"12":a;break;case"H":a=r.getHours(),t===y&&(a=24),s+=a>9?a:"0"+a;break;case"i":var c=r.getMinutes();s+=c>9?c:"0"+c;break;case"s":t=r.getSeconds(),s+=t>9?t:"0"+t;break;case"\\":o++,s+=i.charAt(o);break;default:s+=n}return s}}}function $(e,t){if(""===e)return null;if(!e||e+0==e)return e;if("object"==typeof e)return 3600*e.getHours()+60*e.getMinutes()+e.getSeconds();e=e.toLowerCase(),("a"==e.slice(-1)||"p"==e.slice(-1))&&(e+="m");var i=new RegExp("^([0-2]?[0-9])\\W?([0-5][0-9])?\\W?([0-5][0-9])?\\s*("+x.am+"|"+x.pm+")?$"),r=e.match(i);if(!r)return null;var a=parseInt(1*r[1],10),n=r[4],s=a;12>=a&&n&&(s=12==a?r[4]==x.pm?12:0:a+(r[4]==x.pm?12:0));var o=1*r[2]||0,c=1*r[3]||0,l=3600*s+60*o+c;if(!n&&t&&t._twelveHourTime&&t.scrollDefault){var u=l-t.scrollDefault;0>u&&u>=y/-2&&(l=(l+y/2)%y)}return l}var T=o(),y=86400,x={am:"am",pm:"pm",AM:"AM",PM:"PM",decimal:".",mins:"mins",hr:"hr",hrs:"hrs"},_={init:function(t){return this.each(function(){var a=e(this),n=[];for(var s in e.fn.timepicker.defaults)a.data(s)&&(n[s]=a.data(s));var o=e.extend({},e.fn.timepicker.defaults,n,t);o.lang&&(x=e.extend(x,o.lang)),o=i(o),a.data("timepicker-settings",o),a.addClass("ui-timepicker-input"),o.useSelect?r(a):(a.prop("autocomplete","off"),a.on("click.timepicker focus.timepicker",_.show),a.on("change.timepicker",m),a.on("keydown.timepicker",h),a.on("keyup.timepicker",g),m.call(a.get(0)))})},show:function(i){var a=e(this),n=a.data("timepicker-settings");if(i){if(!n.showOnFocus)return!0;i.preventDefault()}if(n.useSelect)return void a.data("timepicker-list").focus();l(a)&&a.blur();var s=a.data("timepicker-list");if(!a.prop("readonly")&&(s&&0!==s.length&&"function"!=typeof n.durationTime||(r(a),s=a.data("timepicker-list")),!t(s))){_.hide(),s.show();var o={};o.left="rtl"==n.orientation?a.offset().left+a.outerWidth()-s.outerWidth()+parseInt(s.css("marginLeft").replace("px",""),10):a.offset().left+parseInt(s.css("marginLeft").replace("px",""),10),o.top=a.offset().top+a.outerHeight(!0)+s.outerHeight()>e(window).height()+e(window).scrollTop()?a.offset().top-s.outerHeight()+parseInt(s.css("marginTop").replace("px",""),10):a.offset().top+a.outerHeight()+parseInt(s.css("marginTop").replace("px",""),10),s.offset(o);var d=s.find(".ui-timepicker-selected");if(d.length||(p(a)?d=u(a,s,$(p(a))):n.scrollDefault&&(d=u(a,s,n.scrollDefault))),d&&d.length){var m=s.scrollTop()+d.position().top-d.outerHeight();s.scrollTop(m)}else s.scrollTop(0);return e(document).on("touchstart.ui-timepicker mousedown.ui-timepicker",c),n.closeOnWindowScroll&&e(document).on("scroll.ui-timepicker",c),a.trigger("showTimepicker"),this}},hide:function(){var i=e(this),r=i.data("timepicker-settings");return r&&r.useSelect&&i.blur(),e(".ui-timepicker-wrapper").each(function(){var i=e(this);if(t(i)){var r=i.data("timepicker-input"),a=r.data("timepicker-settings");a&&a.selectOnBlur&&v(r),i.hide(),r.trigger("hideTimepicker")}}),this},option:function(t,a){return this.each(function(){var n=e(this),s=n.data("timepicker-settings"),o=n.data("timepicker-list");if("object"==typeof t)s=e.extend(s,t);else if("string"==typeof t&&"undefined"!=typeof a)s[t]=a;else if("string"==typeof t)return s[t];s=i(s),n.data("timepicker-settings",s),o&&(o.remove(),n.data("timepicker-list",!1)),s.useSelect&&r(n)})},getSecondsFromMidnight:function(){return $(p(this))},getTime:function(e){var t=this,i=p(t);if(!i)return null;e||(e=new Date);var r=$(i),a=new Date(e);return a.setHours(r/3600),a.setMinutes(r%3600/60),a.setSeconds(r%60),a.setMilliseconds(0),a},setTime:function(e){var t=this,i=t.data("timepicker-settings");if(i.forceRoundTime)var r=s(e,i);else var r=b($(e),i.timeFormat);return f(t,r),t.data("timepicker-list")&&d(t,t.data("timepicker-list")),this},remove:function(){var e=this;if(e.hasClass("ui-timepicker-input")){var t=e.data("timepicker-settings");return e.removeAttr("autocomplete","off"),e.removeClass("ui-timepicker-input"),e.removeData("timepicker-settings"),e.off(".timepicker"),e.data("timepicker-list")&&e.data("timepicker-list").remove(),t.useSelect&&e.show(),e.removeData("timepicker-list"),this}}};e.fn.timepicker=function(t){return this.length?_[t]?this.hasClass("ui-timepicker-input")?_[t].apply(this,Array.prototype.slice.call(arguments,1)):this:"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.timepicker"):_.init.apply(this,arguments):this},e.fn.timepicker.defaults={className:null,minTime:null,maxTime:null,durationTime:null,step:30,showDuration:!1,showOnFocus:!0,timeFormat:"g:ia",scrollDefault:null,selectOnBlur:!1,disableTouchKeyboard:!1,forceRoundTime:!1,appendTo:"body",orientation:"ltr",disableTimeRanges:[],closeOnWindowScroll:!1,typeaheadHighlight:!0,noneOption:!1}}),function(){$(function(){var e,t,i,r,a,n,s,o,c,l;return e=$(".bottom-left").height(),t=$(".bottom-right .right-cont").height(),e>t&&$(".bottom-right .right-cont").height(e),$("#search_start,#search_end").datepicker({dateFormat:"yy-mm-dd",showAnim:"show"}),$("#course_start_date,#course_end_date").datepicker({dateFormat:"yy-mm-dd",showAnim:"show"}),$("#course_start_time").timepicker({timeFormat:"h:i A",step:5}),$("#course_end_time").timepicker({timeFormat:"h:i A",step:5}),$("#course_description").ckeditor({}),o=function(){return $.fancybox.open($(".msg-box"),{padding:0,autoSize:!0,scrolling:!1,openEffect:"none",closeEffect:"none",helpers:{overlay:{locked:!1,closeClick:!1,css:{background:"rgba(51, 51, 51, 0.2)"}}},afterShow:function(){return $("#match_content_manager,#match_content_student,#box_notice_content,#box_course_notice_at").focus(function(){return $(this).parents(".one").removeClass("invalid")})}})},n=function(e,t){var i;return i=e.parents(".one").next(".one").find("span.num"),$.get("/admin/courses/match_manager",{data:t},function(e){return e.success?($("#course_manager_condition").val(t),i.text(e.value+"\u4eba")):void 0})},s=function(e,t){var i;return i=e.parents(".one").next(".one").find("span.num"),$.get("/admin/courses/match_student",{data:t},function(e){return e.success?($("#course_trainee_condition").val(t),i.text(e.value+"\u4eba")):void 0})},i=function(){var e;return e=!0,$("#match_content_manager,#match_content_student,#box_notice_content,#box_course_notice_at").each(function(){return $.trim($(this).val()).length>0?void 0:($(this).closest(".one").addClass("invalid").removeClass("valid"),e=!1)}),e?l():void 0},l=function(){return $.fancybox.close(),$("form").submit()},r=function(){var e,t;return e=!0,t=parseInt($("#course_status").val()),$("form.info input,select,textarea").each(function(){var t;if("course_instructor_avatar"!==$(this).attr("id")&&$(this).is(":visible"))if("1"===$("#course_charge_category").val()){if($.trim($(this).val()).length<=0&&$.inArray($(this).attr("id"),["course_price_level1","course_price_level2","course_price_level3"])<0)return $(this).parent(".padded").addClass("invalid").removeClass("valid"),e=!1,t=$(this).offset().top,$("html, body").animate({scrollTop:t},500),e=!1,!1}else if($.trim($(this).val()).length<=0)return $(this).parent(".padded").addClass("invalid").removeClass("valid"),e=!1,t=$(this).offset().top,$("html, body").animate({scrollTop:t},500),e=!1,!1}),e?1===t?o():$("form").submit():void 0},c=function(e){return $.fancybox.open($(".proxy-box"),{padding:0,autoSize:!0,minWidth:800,minHeight:500,openEffect:"none",closeEffect:"none",helpers:{overlay:{locked:!1,closeClick:!1,css:{background:"rgba(51, 51, 51, 0.2)"}}},beforeShow:function(){return $(".proxy-box h6").text(e.parents("td").siblings("td.cname").text()),$(".proxy-box #proxy_cid").val(e.data("id")),$(".proxy-box .content .checklist").html(""),$(".proxy-box .multiple_proxy").attr("data-cid",e.data("id"))}})},a=function(e,t){return $.post("/admin/orders/generate_proxy_order",{uarr:e,cid:t},function(e){return e.success?($(".select-tool").addClass("yellow"),$(".select-tool button").removeClass("info").addClass("success").text("\u62a5\u540d\u6210\u529f")):void 0})},$("form.info input,select,textarea").focus(function(){return $(this).parent(".padded").removeClass("invalid")}),$("button.submit").click(function(e){return e.preventDefault(),r()}),$("body").on("change","#match_content_manager",function(){var e;return e=$(this).val(),n($(this),e)}),$("body").on("change","#match_content_student",function(){var e;return e=$(this).val(),s($(this),e)}),$("body").on("keyup","#box_notice_content",function(){var e,t;return t=$(this).val(),e=72-t.length,$("i.remain").text(e),$("#course_notice_content").val(t)}),$("body").on("keyup","#box_course_notice_at",function(){var e;return e=$(this).val(),$("#course_notice_at").val(e)}),$("body").on("click",".box_button",function(){return i()}),$("body").on("click",".pagination a",function(){var e,t,i,r,a,n,s,o,c;return!$(this).hasClass("disabled")&&(s=$(this).data("page"),t=$(this).data("code"),n=$(this).data("name"),o=$(this).data("start"),r=$(this).data("end"),i=$(this).data("content"),e=$(this).data("city"),c=$(this).data("status"),a={page:s,code:t,name:n,start:o,end:r,content:i,city:e,status:c},s)?$.get("/admin/courses",a,function(){}):void 0}),$("body").on("click","a.proxy",function(){return c($(this))}),$("body").on("click",".multiple_proxy",function(e){return e.preventDefault(),$.get("/admin/courses/proxy_search",$("form.proxy-form").serialize(),function(e){return $(".proxy-box .content .checklist").html(""),$.each(e.value,function(e,t){return t.ordered?$("<li class='turquoise one fourth' data-uid="+t.uid+" data-ordered=1 aria-checked='true'>"+t.name+"</li>").appendTo($(".proxy-box .content .checklist")):$("<li class='turquoise one fourth' data-uid="+t.uid+" data-ordered=0>"+t.name+"</li>").appendTo($(".proxy-box .content .checklist"))})})}),$("body").on("click",".select-tool li",function(){return"true"===$(this).attr("aria-checked")?$('.content .checklist li[data-ordered="0"]').attr("aria-checked",!0):$('.content .checklist li[data-ordered="0"]').attr("aria-checked",!1)}),$("body").on("click","button.multiple_proxy",function(){var e,t;return e=$(this).data("cid"),$('.content .checklist li[aria-checked="true"]').length>0&&(t=[],$('.content .checklist li[aria-checked="true"]').each(function(){return t.push($(this).data("uid"))}),t.length>0)?a(t,e):void 0})})}.call(this);