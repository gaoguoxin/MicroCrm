(function(){$(function(){var e,a,t,i,n,s,r,d,o,u;return $("#search_start,#search_end").datepicker({dateFormat:"yy-mm-dd",showAnim:"show"}),i=$("#email"),r=$("#mobile"),d=$.trim($("#password").val()),t=function(e,a){return setTimeout(a,e)},s=function(){return $("html, body").animate({scrollTop:0},500)},n=function(e){return $(".flash-notice").text(e).addClass("animated bounceInRight").show(),s(),t(2e3,function(){return window.location.reload()})},o=function(){return $(".flash-notice").removeClass("animated bounceInRight").addClass("animated bounceOutRight")},e=function(e){var a;return"email"===e.attr("id")&&(a={email:e.val()}),"mobile"===e.attr("id")&&(a={mobile:e.val()}),a.id=$('input[name="id"]').val(),$.post("/admin/users/check_exist",a,function(a){return a.success?a.value?e.parents(".padded").addClass("invalid").removeClass("valid"):e.parents(".padded").addClass("valid").removeClass("invalid"):void 0})},a=function(e){var a,t;return t=!0,a=$(e.hasClass("upd")?"#name,#email,#mobile":"#name,#email,#mobile,#password"),a.each(function(){var e;e=$.trim($(this).val()),e.length<=0&&($(this).parents(".padded").addClass("invalid").removeClass("valid"),s(),t=!1)}),t?u(e):void 0},u=function(e){var a,t,i;return t=$("form.new-user").serialize(),e.hasClass("upd")?(a="/admin/users/update_info",i="\u7528\u6237\u4fe1\u606f\u4fee\u6539\u6210\u529f\uff01",console.log(i)):(a="/admin/users",i="\u7528\u6237\u4fe1\u606f\u521b\u5efa\u6210\u529f,\u70b9\u51fb\u5217\u8868\u8fdb\u884c\u67e5\u770b!"),$.post(a,t,function(e){return e.success?n(i):("error_5"===e.value.error_code&&($("#email").parents(".padded").addClass("invalid").removeClass("valid"),s()),"error_6"===e.value.error_code?($("#mobile").parents(".padded").addClass("invalid").removeClass("valid"),s()):void 0)})},$("body").on("click",".tab-nav:last",function(){return $.get("/admin/users/new",{},function(){})}),$("body").on("click",".search_user",function(e){var a;return e.preventDefault(),a=$("form.search-user").serialize(),$.get("/admin/users",a,function(){})}),$("body").on("click","td a.delete-user",function(){var e,a;return a=$(this).parents("tr"),e=$(this).data("cid"),$.get("/admin/users/delete",{id:e},function(e){return e.success?a.remove():void 0})}),$("body").on("click",".pagination a",function(){var e,a,t,i,n,s,r,d,o,u,l,c,m;return!$(this).hasClass("disabled")&&(o=$(this).data("page"),d=$(this).data("name"),i=$(this).data("email"),l=$(this).data("role"),u=$(this).data("position"),a=$(this).data("company"),e=$(this).data("city"),r=$(this).data("interest"),t=$(this).data("creater"),m=$(this).data("status"),c=$(this).data("start"),n=$(this).data("end"),s={page:o,name:d,email:i,role:l,position:u,company:a,city:e,interest:r,creater:t,status:m,start:c,end:n},o)?$.get("/admin/users",s,function(){}):void 0}),$("body").on("focusout","form.new-user #email,#mobile",function(){return e($(this))}),$("body").on("focus","form.new-user input",function(){return $(this).parents(".padded").removeClass("invalid").removeClass("valid")}),$("body").on("click","form.new-user .info-submit",function(e){var t;return t=$(this),e.preventDefault(),a(t)}),$("body").on("click","a.edit-user",function(){var e;return e=$(this).attr("id"),$.get("/admin/users/"+e+"/edit",{},function(){})})})}).call(this);