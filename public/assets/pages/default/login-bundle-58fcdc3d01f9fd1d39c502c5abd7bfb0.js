(function(){$(function(){var n,e,o,t,i,r,a;return n=$('input[name="email_mobile"]'),i=$('input[name="password"]'),o=function(n,e){return n.parents(".ipt-container").addClass("invalid"),n.siblings(".tooltip").text("").text(e).removeClass("animated bounceOutRight").addClass("animated bounceInRight").show()},r=function(n){return n.parents(".ipt-container").removeClass("invalid"),n.siblings(".tooltip:visible").length>0?n.siblings(".tooltip").removeClass("animated bounceInRight").addClass("animated bounceOutRight").text(""):void 0},e=function(){var e,t;return e=$.trim(n.val()),t=$.trim(i.val()),0===e.length?(o(n,"\u8bf7\u8f93\u5165\u5e10\u53f7"),!1):0===t.length?(o(i,"\u8bf7\u8f93\u5165\u5bc6\u7801"),!1):a()},a=function(){var e,t,r,a;return e=n.val(),t=i.val(),a=$(".remember-me").attr("aria-checked"),r=window.location.href.split("ref=")[1],$.post("/sessions",{email_mobile:e,password:t,remember:a,ref:r},function(e){return e.success?window.location.href="/after_sign_in?ref="+decodeURIComponent(e.value.ref):"error_3"===e.value.error_code?o(n,"\u8be5\u7528\u6237\u4e0d\u5b58\u5728"):o(i,"\u60a8\u8f93\u5165\u7684\u5bc6\u7801\u6709\u8bef")})},t=function(){return $.fancybox.open($(".forget-box"),{padding:0,autoSize:!0,scrolling:!1,minWidth:500,openEffect:"none",closeEffect:"none",helpers:{overlay:{locked:!1,closeClick:!1,css:{background:"rgba(51, 51, 51, 0.2)"}}},beforeShow:function(){},afterClose:function(){}})},$("body").on("focus",".form input",function(){return r($(this))}),$("body").on("click",".login-btn",function(n){return n.preventDefault(),e()}),$("body").on("keydown","password",function(n){return 13===n.which?$(".login-btn").click():void 0}),$("body").on("click","a.forget-password",function(){return t()}),$("body").on("click","span.f-btn",function(){var n;return n=$(".f-mobile").val(),n.length>0?$.post("/sessions/fpwd",{mobile:n},function(n){return $(".forget-box .box").text(n.success?"\u65b0\u5bc6\u7801\u5df2\u53d1\u9001\u5230\u60a8\u7684\u624b\u673a!":"\u8be5\u624b\u673a\u53f7\u4e0d\u5b58\u5728")}):void 0}),$("body").on("keydown",".f-mobile",function(n){return 13===n.which?$("span.f-btn").click():void 0})})}).call(this);